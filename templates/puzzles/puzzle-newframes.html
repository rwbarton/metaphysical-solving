{% load static %}
<html style="width:100%; height:100%;">
    <head>
      <link rel="stylesheet" href="{% static "css/base.css" %}?1" />
      <link rel="stylesheet" href="{% static "css/status.css" %}" />
      <link rel="stylesheet" href="{% static "css/priority.css" %}" />
      <link rel="icon" href="{% static "img/favicon.ico" %}" />
      <title>{% block title %}{% endblock %}</title>
      {% if refresh %}
      <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.0/jquery.min.js"></script>
      <script type="text/javascript">
        function reload() {
          $.ajax({
            url: "{% url 'puzzles.views.puzzle_info' id %}",
            success: function (data, textStatus, jqXHR) { document.getElementById("topbar").innerHTML = data; },
          });
        };
        $(document).ready(function () { setInterval(reload, {{ refresh }} * 1000); });

        function submitform (event) {
          event.preventDefault();
          const target = event.currentTarget;
          console.log(target.action);
          var xhr = new XMLHttpRequest();
          var data = new FormData(target);
          xhr.open('POST',target.action);
          xhr.send(data);

          xhr.onreadystatechange = function() {
            if (xhr.readyState == XMLHttpRequest.DONE) {
                reload();
            }
          }
          return false; 
        };
      </script>
      {% endif %}
    </head>
<title>{{ title }}</title>
<link rel="icon" href="{% static "img/favicon.ico" %}" />
</head>
<body style="width:100%; height:100%;"">
  <div id="topbar" style="height: 65px;">
     {% include "puzzles/puzzle-newinfo.html" %}
  </div>
  <iframe src="{% url 'puzzles.views.puzzle_bottom' id %}" style="width:100%; height:calc(100% - 65px);"></iframe>
</body>
</html>
